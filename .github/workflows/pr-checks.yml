name: PR Checks

on:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  pull-requests: write # Allow workflow to post comments on PRs

jobs:
  # Run the actual checks
  pre-commit:
    uses: ./.github/workflows/reusable-pre-commit.yml

  terraform-lint:
    uses: ./.github/workflows/reusable-terraform-lint.yml

  # Comment on PR status after checks complete
  comment-status:
    needs: [pre-commit, terraform-lint]
    uses: ./.github/workflows/reusable-pr-status-commenter.yml
    with:
      required-checks: "pre-commit,terraform-lint,test-actions,test-workflows,python-ci"
